<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                template="/template/main.xhtml">

    <ui:define name="head">
        <h:outputStylesheet library="css" name="form.css"/>
    </ui:define>

    <f:metadata>
        <f:viewParam name="directorId" value="#{movieEditView.directorId}" required="true"/>
        <f:viewParam name="movieId" value="#{movieEditView.movieId}" />
        <f:viewAction action="#{movieEditView.loadMovie()}" />
        <f:event type="preRenderView" listener="#{movieEditView.redirectIfDirectorIsNull}" />
        <f:event type="preRenderView" listener="#{movieEditView.redirectIfMovieIsNull}" />
    </f:metadata>

    <ui:define name="content">
        <article class="container mt-4">
            <header>
                <h2>
                    <h:outputText value="#{'Edit Movie'}"/>
                </h2>
            </header>

            <h:form styleClass="mt-3">
                <h:panelGrid columns="2" columnClasses="col-3,col-9" styleClass="mb-3">

                    <h:outputLabel for="title" value="Title:"/>
                    <h:inputText id="title" value="#{movieEditView.movie.title}" required="true"/>

                    <h:outputLabel for="releaseDate" value="Release Date:"/>
                    <h:inputText id="releaseDate" value="#{movieEditView.movie.releaseDate}" required="true"/>

                    <h:outputLabel for="genres" value="Genres:"/>
                    <h:selectManyCheckbox id="genres" value="#{movieEditView.movie.genres}" layout="pageDirection">
                        <f:selectItems value="#{movieEditView.availableGenres}" var="g"
                                       itemValue="#{g}" itemLabel="#{g}"/>
                    </h:selectManyCheckbox>
                </h:panelGrid>

                <div class="mt-3">
                    <h:commandButton value="Update Movie"
                                     action="#{movieEditView.updateMovie}"
                                     styleClass="btn btn-success me-2"/>
                    <h:link outcome="/view/director/director_details"
                            value="Cancel"
                            styleClass="btn btn-secondary">
                        <f:param name="id" value="#{movieEditView.director.id}"/>
                    </h:link>
                </div>
            </h:form>
        </article>
    </ui:define>
</ui:composition>
